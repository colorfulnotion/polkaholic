#!/usr/bin/env node
// Usage:

var XCMGlobalAssetRegistryManager = require("./xcmgarManager");

var polkadotEndpoint = {
    chainkey: 'polkadot-0',
    relaychain: 'polkadot',
    endpoints: ['wss://rpc.polkadot.io']
}
var kusamaEndpoint = {
    chainkey: 'kusama-0',
    relaychain: 'kusama',
    endpoints: ['wss://kusama-rpc.polkadot.io']
}

async function main() {
    var xcmgarm = new XCMGlobalAssetRegistryManager();
    let relaychains = ['polkadot', 'kusama']
    let validParachainList = await xcmgarm.fetchParaIDs([polkadotEndpoint, kusamaEndpoint])
    await xcmgarm.updatePublicEndpoints(relaychains, validParachainList)
}

main()
    .then(() => {
        console.log("DONE")
        process.exit(0);
    })
    .catch((e) => {
        console.error('ERROR', e);
        process.exit(1);
    });
